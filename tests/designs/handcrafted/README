Adapted from Xilinx user guide.